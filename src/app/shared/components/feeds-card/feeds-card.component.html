<div class="main-container">
  <div class="d-flex">
    <div class="profile-pic"></div>
    <div class="w-100">
      <div class="d-flex justify-content-between c-click" (click)="doStartReading()">
        <h5>{{ capsule.title | titlecase }}</h5>
      </div>
      <p class="grey-color">
        {{ capsule.author | titlecase }}<span> ({{ dateAgoStr }})</span> |
        <span>Posted: {{ capsule.publisher | titlecase }}</span>
      </p>
    </div>
  </div>
  <p [ngClass]="{'red-color': isOnFocus}">{{ capsule.description }} <span class="grey-color c-click" (click)="doStartReading()"> see moreâ€¦</span></p>
  <div class="position-relative c-click" (click)="doStartReading()" appInView (inView)="onInView($event)" >
    <div *ngIf="capsule.type !== 'VIDEO' || !isOnFocus">
      <img [id]="'ind_'+index" [src]="capsule.imageUrl" alt="" class="img-fluid feeds-img w-100" />
      <div class="icons timer">
        <img src="/assets/images/timer.svg" alt="timer icon" class="rounded-img" /><span>{{
          capsule.duration
        }}</span>
      </div>
      <div class="icons labelRed">
        <span>{{ capsule.topicCode }}</span>
      </div>
      <div class="short-desc">
        <p>The IT Ops Sessions: The Effect of ChatGPT and AI on the World of IT</p>
      </div>
    </div>
    <div *ngIf="isOnFocus && capsule.type === 'VIDEO'" class="img-fluid feeds-img w-100" >
      <iframe #capsuleFrame 
        [src]="resourceUrl"
        class="video-container"
        frameborder="0"
        (error)="onAfterIframeLoaded()"
      >
      </iframe>
    </div>
    
    <div class="web-url">
      <a href="{{capsule.resourceUrl}}" target="_blank">{{ capsule.resourceUrl }}</a>
    </div>
    <!--div *ngIf="capsule.type === 'VIDEO'" class="play-button play-icon"></!--div-->
  </div>
  <div class="d-flex justify-content-between">
    <p class="grey-color c-default">{{ capsule.recommendations }} recommended</p>
    <div class="d-flex align-items-center grey-color c-default">
      {{ capsule.type | titlecase }} <span class="article-gray-icon ml-2"></span>
    </div>
  </div>
  <div>
    <div class="d-flex justify-content-between">
      <div class="d-flex align-items-center icon-click icons-section" (click)="onCapsuleRecommend()">
        <span class="recommend-gray-icon pr-4"></span>Recommend
      </div>
      <div class="d-flex align-items-center icon-click icons-section" (click)="onShareClick()">
        <span class="share-gray-icon pr-4"></span>Share
      </div>
      <div class="d-flex align-items-center disabled icons-section">
        <span class="comment-gray-icon pr-4"></span>Comment
      </div>
      <div
        class="d-flex align-items-center icons-section"
        [ngClass]="{ disabled: disableBookmark(), 'icon-click': !disableBookmark() }"
        (click)="onCapsuleBookmark()"
      >
        <span class="bookmark-gray-icon pr-4"></span>Bookmark
      </div>
    </div>
  </div>
</div>
