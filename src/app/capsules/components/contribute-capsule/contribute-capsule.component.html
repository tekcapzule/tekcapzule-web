<div class="contribute-page">
  <section class="container-fluid contribute-bg">
    <div class="container pt-5">
      <div class="contribute-form-bg" [formGroup]="contributeFormGroup">
        <div class="text-center pb-2">
          <h2>Contribute</h2>
        </div>
        <div
          class="form-group"
          [ngClass]="{
            'error-text':
              contributeFormGroup.get('title').touched && contributeFormGroup.get('title').invalid
          }"
        >
          <label for="capsuleTitle">Capsule Title</label>
          <input type="text" class="form-control" name="title" formControlName="title" />
          <span
            class="error-msg"
            *ngIf="
              contributeFormGroup.get('title').touched && contributeFormGroup.get('title').invalid
            "
            >Please enter capsule title.</span
          >
        </div>
        <div
          class="form-group"
          [ngClass]="{
            'error-text':
              contributeFormGroup.get('resourceUrl').touched &&
              contributeFormGroup.get('resourceUrl').invalid
          }"
        >
          <label for="link">Link</label>
          <input
            type="text"
            class="form-control"
            name="resourceUrl"
            formControlName="resourceUrl"
          />
          <span
            class="error-msg"
            *ngIf="
              contributeFormGroup.get('resourceUrl').touched &&
              contributeFormGroup.get('resourceUrl').invalid
            "
            >Please enter capsule link.</span
          >
        </div>
        <div
          class="form-group"
          [ngClass]="{
            'error-text':
              contributeFormGroup.get('topicCode').touched &&
              contributeFormGroup.get('topicCode').invalid
          }"
        >
          <label for="topic">Topic</label>
          <select class="form-control" name="topicCode" formControlName="topicCode">
            <option value="">Select Topic</option>
            <option *ngFor="let topic of allTopics" value="{{ topic.code }}">
              {{ topic.title }}
            </option>
          </select>
          <span
            class="error-msg"
            *ngIf="
              contributeFormGroup.get('topicCode').touched &&
              contributeFormGroup.get('topicCode').invalid
            "
            >Please select a topic.</span
          >
        </div>
        <div
          class="form-group"
          *ngIf="hasTopicSelected()"
          [ngClass]="{
            'error-text':
              contributeFormGroup.get('category').touched &&
              contributeFormGroup.get('category').invalid
          }"
        >
          <label for="category">Category</label>
          <select class="form-control" name="category" formControlName="category">
            <option value="">Select Category</option>
            <option *ngFor="let category of getCategoriesByTopicCode()" value="{{ category }}">
              {{ category }}
            </option>
          </select>
          <span
            class="error-msg"
            *ngIf="
              contributeFormGroup.get('category').touched &&
              contributeFormGroup.get('category').invalid
            "
            >Please select a category.</span
          >
        </div>
        <div class="form-group">
          <label for="comment">Comment</label>
          <textarea
            class="form-control"
            rows="3"
            name="description"
            formControlName="description"
          ></textarea>
        </div>
        <div class="text-center">
          <button class="button secondary mr-5" (click)="onCancel()">Cancel</button>
          <button class="button primary" (click)="onSubmit()">Submit</button>
        </div>
      </div>
      <div class="formuser-icon"></div>
    </div>
  </section>
</div>
